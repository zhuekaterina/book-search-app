(this["webpackJsonpbook-search"]=this["webpackJsonpbook-search"]||[]).push([[0],{11:function(e,o,t){},13:function(e,o,t){"use strict";t.r(o);var n=t(1),s=t.n(n),c=t(4),a=t.n(c),i=(t(11),t(2)),r=t(0);var p=function(e){var o,t=s.a.useState(""),n=Object(i.a)(t,2),c=n[0],a=n[1];function p(){e.onSubmit(c)}function u(e){e.preventDefault(),p()}return Object(r.jsx)("section",{className:"form-container",children:Object(r.jsxs)("form",{className:"search-form",onSubmit:u,children:[Object(r.jsx)("input",{onKeyUp:function(){clearTimeout(o),o=setTimeout(p,1e3)},onKeyDown:function(){clearTimeout(o)},className:"search-form__field",onChange:function(e){e.preventDefault(),a(e.target.value)},placeholder:"Which book do you look for?"}),Object(r.jsx)("button",{className:"search-form__button",onClick:u})]})})};var u=function(){return Object(r.jsxs)("header",{className:"header",children:[Object(r.jsx)("h1",{className:"header__title",children:"BOOKSHELVES"}),Object(r.jsx)("h2",{className:"header__subtitle",children:"Book Search App"})]})};var b=function(e){return Object(r.jsxs)("div",{className:"snippet",onClick:function(){e.onOpenPopup(e.book),e.cover?e.onChosenBook(e.cover):e.onChosenBook(e.bookPath)},children:[Object(r.jsx)("img",{src:"https://covers.openlibrary.org/b/olid/"+e.cover+"-S.jpg",className:"snippet__cover",alt:"#"}),Object(r.jsxs)("div",{className:"snippet__titles",children:[Object(r.jsx)("p",{className:"snippet__name",children:e.title}),Object(r.jsx)("p",{className:"snippet__author",children:"by ".concat(e.author)})]})]})};var l=function(e){return Object(r.jsxs)("div",{className:"snippet snippet-no-results",children:[Object(r.jsx)("p",{className:"snippet-no-results__text",children:"Could not find a book with a name starting with "}),Object(r.jsx)("p",{className:"snippet-no-results__title",children:'"'.concat(e.inputValue,'"')})]})};var h=function(e){return Object(r.jsx)("section",{className:"snippets-container",children:e.isEmpty?Object(r.jsx)(l,{inputValue:e.inputValue}):e.books.map((function(o){return Object(r.jsx)(b,{book:o,bookPath:o.bookPath,title:o.title,author:o.author,cover:o.coverId,onOpenPopup:e.onOpenPopup,onChosenBook:e.onChosenBook},o.key)}))})};var j=function(){var e=new Date;return Object(r.jsx)("footer",{className:"footer",children:Object(r.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",e.getFullYear()," Bookshelves"]})})};var k=function(e){return Object(r.jsx)("div",{className:"popup-book ".concat(e.isOpened&&"popup-book_opened"),children:Object(r.jsxs)("figure",{className:"popup-book__container",children:[Object(r.jsx)("button",{type:"button",className:"popup-book__close-button",name:"close-button",onClick:e.onClose}),Object(r.jsx)("img",{className:"popup-book__image",src:"https://covers.openlibrary.org/b/olid/"+e.book.coverId+"-L.jpg",alt:"#"}),Object(r.jsxs)("div",{className:"popup-book__titles",children:[Object(r.jsx)("p",{className:"popup-book__title popup-book__name popup-book__title_bold",children:e.book.title}),Object(r.jsx)("p",{className:"popup-book__title popup-book__author",children:"by ".concat(e.book.author)}),Object(r.jsx)("p",{className:"popup-book__title popup-book__date",children:"Published in ".concat(e.bookInfo.date)}),Object(r.jsxs)("p",{className:"popup-book__title popup-book__publishers",children:["by ",e.bookInfo.publishers]}),Object(r.jsxs)("p",{className:"popup-book__title popup-book__isbn",children:["ISBN 10: ",e.bookInfo.isbn10]}),Object(r.jsxs)("p",{className:"popup-book__title popup-book__isbn",children:["ISBN 13: ",e.bookInfo.isbn13]}),Object(r.jsx)("a",{className:"popup-book__title popup-book__link",href:"https://openlibrary.org/books/".concat(e.book.bookPath),target:"_blank",rel:"noreferrer",children:"https://openlibrary.org/books/".concat(e.book.bookPath)})]})]})})},_=t(5),d=t(6),f=new(function(){function e(o){var t=o.baseUrl;Object(_.a)(this,e),this._baseUrl=t}return Object(d.a)(e,[{key:"_getResStatus",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"getBookList",value:function(e){var o=this;return fetch("".concat(this._baseUrl,"search.json?title=").concat(e)).then((function(e){return o._getResStatus(e)}))}},{key:"getBook",value:function(e){var o=this;return fetch("".concat(this._baseUrl,"books/").concat(e,".json")).then((function(e){return o._getResStatus(e)}))}}]),e}())({baseUrl:"https://openlibrary.org/"});var m=function(){var e=s.a.useState(!1),o=Object(i.a)(e,2),t=o[0],n=o[1],c=s.a.useState([]),a=Object(i.a)(c,2),b=a[0],l=a[1],_=s.a.useState({}),d=Object(i.a)(_,2),m=d[0],O=d[1],v=s.a.useState(!1),x=Object(i.a)(v,2),g=x[0],N=x[1],y=s.a.useState(""),S=Object(i.a)(y,2),B=S[0],C=S[1],P=s.a.useState({}),I=Object(i.a)(P,2),w=I[0],U=I[1];return Object(r.jsxs)("div",{className:"page",children:[Object(r.jsx)(u,{}),Object(r.jsx)(p,{onSubmit:function(e){f.getBookList(e).then((function(e){if(0===e.numFound)N(!0);else{N(!1);var o=e.docs.map((function(e){return{title:e.title,author:e.author_name||"Unknown author",date:e.first_publish_year,coverId:e.cover_edition_key,key:e.key,bookPath:e.edition_key[0]||e.edition_key}}));l(o)}})).then((function(){C(e)})).catch((function(e){console.log(e)}))}}),Object(r.jsx)(h,{onChosenBook:function(e){f.getBook(e).then((function(e){U({date:e.publish_date,isbn10:e.isbn_10||"unknown",isbn13:e.isbn_13||"unknown",publishers:e.publishers})})).catch((function(e){console.log(e)}))},onOpenPopup:function(e){n(!0),O(e)},books:b,isEmpty:g,inputValue:B}),Object(r.jsx)(j,{}),Object(r.jsx)(k,{isOpened:t,onClose:function(){n(!1)},book:m,bookInfo:w})]})},O=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,14)).then((function(o){var t=o.getCLS,n=o.getFID,s=o.getFCP,c=o.getLCP,a=o.getTTFB;t(e),n(e),s(e),c(e),a(e)}))};a.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(m,{})}),document.getElementById("root")),O()}},[[13,1,2]]]);
//# sourceMappingURL=main.a957ed4d.chunk.js.map